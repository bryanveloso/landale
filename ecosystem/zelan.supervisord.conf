[unix_http_server]
file=/tmp/landale-supervisor.sock

[supervisord]
logfile=/Users/Avalonstar/Code/bryanveloso/landale/logs/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info
pidfile=/tmp/landale-supervisord.pid
nodaemon=false
minfds=1024
minprocs=200

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/landale-supervisor.sock

; Programs
[program:phononmaser]
command=/Users/Avalonstar/Code/bryanveloso/landale/apps/phononmaser/.venv/bin/python -m src.main
directory=/Users/Avalonstar/Code/bryanveloso/landale/apps/phononmaser
autostart=true
autorestart=true
startretries=3
stderr_logfile=/Users/Avalonstar/Code/bryanveloso/landale/apps/phononmaser/logs/phononmaser-error.log
stdout_logfile=/Users/Avalonstar/Code/bryanveloso/landale/apps/phononmaser/logs/phononmaser-out.log
environment=
    LOG_LEVEL="info",
    PHONONMASER_PORT="8889",
    PHONONMASER_HEALTH_PORT="8890",
    WHISPER_MODEL_PATH="/Users/Avalonstar/Code/utilities/whisper.cpp/models/ggml-large-v3-turbo-q8_0.bin",
    WHISPER_THREADS="8",
    WHISPER_LANGUAGE="en",
    WHISPER_VAD_MODEL_PATH="/Users/Avalonstar/Code/utilities/whisper.cpp/models/ggml-silero-v5.1.2.bin",
    SERVER_HOST="saya",
    PHONONMASER_HOST="zelan",
    SERVER_URL="ws://saya:7175/events"
stopsignal=TERM
stopwaitsecs=30
user=Avalonstar
priority=10

[program:analysis]
command=/Users/Avalonstar/Code/bryanveloso/landale/apps/analysis/.venv/bin/python -m src.main
directory=/Users/Avalonstar/Code/bryanveloso/landale/apps/analysis
autostart=true
autorestart=true
startretries=3
stderr_logfile=/Users/Avalonstar/Code/bryanveloso/landale/apps/analysis/logs/analysis-error.log
stdout_logfile=/Users/Avalonstar/Code/bryanveloso/landale/apps/analysis/logs/analysis-out.log
environment=
    LOG_LEVEL="info",
    SERVER_HOST="saya",
    PHONONMASER_HOST="zelan",
    LMS_HOST="zelan",
    ANALYSIS_HOST="zelan",
    PHONONMASER_URL="ws://zelan:8889",
    SERVER_URL="ws://saya:7175/events",
    LMS_API_URL="http://zelan:1234/v1",
    LMS_MODEL="dolphin-2.9.3-llama-3-8b"
stopsignal=TERM
stopwaitsecs=10
user=Avalonstar
priority=20

; Group for managing all Python services
[group:landale-python]
programs=phononmaser,analysis
priority=999
